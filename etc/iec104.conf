
nodes = {
     	iec104 = {
		type = "iec60870-5-104-slave"

		# network address and port of the server
		# 0.0.0.0 listens on all interfaces
		address = "0.0.0.0"
		port = 2404
		# common address of this IEC104 slave
		ca = 41025

		out = {
			# map signals to information object addresses and asdu data types
			# one asdu per specified asdu_type is send for each batch of samples
			signals = (
				{
					# the asdu data type
					asdu_type = "normalized-float"
					# add 56 bit unix timestamp to asdu
					with_timestamp = false
					# the information object address of this signal
					ioa = 4202832
				},
				{
					asdu_type_id = "M_ME_NA_1"
					ioa = 4202852
				},
				{
					asdu_type = "single-point"
					with_timestamp = true
					ioa = 4206948
				}
			)
		}
	}
	signal = {
		type = "signal.v2"
		rate = 1
		in = {
			signals = (
				{
					name = "sine1"
					signal = "sine"
					frequency = 0.1
					phase = 90
				},
				{
					name = "sine2"
					signal = "sine"
					frequency = 0.1
				},
				{
					name = "bool"
					signal = "pulse"
					pulse_width = 2
					frequency = 0.05
				}
			)
		}
	}
}

paths = (
	{
		in = "signal"
		out = "iec104"
		hooks = (
			# {
			# 	type = "cast"
		        #         signals = (
			# 		"sine1",
			# 		"sine2"
			# 	)
		        #         new_type = "integer"
			# },
			{
				type = "cast"
		                signal = "bool"
		                new_type = "boolean"
			},
			{
				type = "print"
			},
		)
	}
)
