
nodes = {
     	iec104 = {
		type = "iec60870-5-104"

		# network address and port of the server
		# 0.0.0.0 listens on all interfaces
		address = "0.0.0.0"
		port = 2404
		# common address of this IEC104 slave
		ca = 41025
		# queue sizes for this node
		low_priority_queue = 100
		high_priority_queue = 100

		out = {
			# map signals to information object addresses and asdu data types
			# one asdu per specified asdu_type_id/asdu_type+with_timestamp is
			# send for each sample. Signals of the same type are collected
			# in a single asdu 
			signals = (
				{
					# the asdu data type
					asdu_type = "normalized-float"
					# add 56 bit unix timestamp to asdu
					with_timestamp = false
					# the information object address of this signal
					ioa = 4202832
				},
				{
					# equivalent to the asdu_type above
					asdu_type_id = "M_ME_NA_1"
					ioa = 4202852
				},
				{
					# a boolean value
					asdu_type = "single-point"
					with_timestamp = true
					ioa = 4206948
				}
			)
		}
	}
	signal = {
		type = "signal.v2"
		rate = 1
		in = {
			signals = (
				{
					name = "sine1"
					signal = "sine"
					frequency = 0.1
					phase = 90
				},
				{
					name = "sine2"
					signal = "sine"
					frequency = 0.1
				},
				{
					name = "bool"
					signal = "pulse"
					pulse_width = 2
					frequency = 0.05
				}
			)
		}
	}
}

paths = (
	{
		in = "signal"
		out = "iec104"
		hooks = (
			{
				type = "cast"
		                signal = "bool"
		                new_type = "boolean"
			},
			{
				type = "print"
			}
		)
	}
)
